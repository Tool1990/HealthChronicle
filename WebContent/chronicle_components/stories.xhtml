<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
      
      
<ui:composition>
	<div>		
		<h:form id="stories-form"> 
			<p:growl id="messages" showDetail="true"/>   
			
			<p:panel id="chronicle-panel" header="Chronik" widgetVar="panel">  
	  
	       		<p:commandButton value="Neue Geschichte hinzufügen" actionListener="#{chronicleBean.createStory}" update="messages" ajax="false" />  
	       		<div style="height:12px"></div>
	       		<ui:repeat value="#{chronicleBean.allStories}" var="story" varStatus="status">
					<div style="width:100%;height:24px;background-color:#{chronicleBean.getColorForStory(story)}">	
						<div style="text-align:left;width:80%;float:left">
							<h:commandLink value="#{chronicleBean.renderDateFrom(story)} : #{chronicleBean.renderTitleFrom(story)}" action="#{chronicleBean.select(story)}"></h:commandLink>
						</div>
						<div style="text-align:right;width:20%;float:left">
							<h:commandLink value="löschen" action="#{chronicleBean.deleteStory(story)}"></h:commandLink>
						</div>
					</div>		
				</ui:repeat>
	          
	   		</p:panel> 
   	 	</h:form>
	</div> 
</ui:composition>
</html>